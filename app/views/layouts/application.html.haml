<!DOCTYPE html>
%html
  %head

    %meta{charset: "UTF-8"}
    %meta{name: "viewport", content: "width=device-width"}
    %title= t '.bookstore'

    = csrf_meta_tags
    = stylesheet_link_tag "https://fonts.googleapis.com/css?family=Open+Sans",
                          'data-turbolinks-track': 'reload'
    = stylesheet_link_tag "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css",
                          integrity: "sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u",
                          crossorigin: "anonymous",
                          'data-turbolinks-track': 'reload'
    = stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload'
    = javascript_include_tag "https://code.jquery.com/jquery-3.2.1.min.js",
                              integrity: "sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=",
                              crossorigin: "anonymous",
                              'data-turbolinks-track': 'reload'
    = javascript_include_tag "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js",
                              integrity: "sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa",
                              crossorigin: "anonymous",
                              'data-turbolinks-track': 'reload'
    = javascript_include_tag "https://use.fontawesome.com/67602d7308.js",
                              'data-turbolinks-track': 'reload'
    = javascript_include_tag "//cdnjs.cloudflare.com/ajax/libs/jasny-bootstrap/3.1.3/js/jasny-bootstrap.min.js",
                            'data-turbolinks-track': 'reload'
    = javascript_include_tag 'application', 'data-turbolinks-track': 'reload'

  %body
    %header.navbar.navbar-default
      .container
        .navbar-header
          %button.navbar-toggle.pull-left{type: "button", 'data-toggle': "collapse", 'data-target': "#navbar"}
            %span.sr-only
            %span.icon-bar
            %span.icon-bar
            %span.icon-bar
          %a.navbar-brand= t '.bookstore'
          = link_to @cart, class: 'shop-link pull-right visible-xs' do
            %span.shop-icon
              %span#cart-xs.shop-quantity= @cart.products_quantity
        = link_to @cart, class: 'shop-link pull-right hidden-xs', id: 'cart' do
          %span.shop-icon
            %span#cart.shop-quantity= @cart.products_quantity
        #navbar.navbar-collapse.collapse.pl-30{'aria-expanded': "false"}
          .visible-xs
            %button.close{type: "button", 'aria-label': "Close"}
              %span{'aria-hidden': "true"} &times;
            %ul.nav.navbar-nav
              %li
                = link_to t('.home'), root_path
              %li
                %a{type: "button", 'data-toggle': "collapse", href: "#menu", 'aria-expanded': "false", 'aria-controls': "menu"} #{ t '.shop' }
                %ul#menu.collapse.list-unstyled.pl-30.mb-10{'aria-expanded': "false"}
                  %li= link_to t('books.categories.mobile_development'),
                              books_path(category: 'mobile_development'),
                              class: 'collapse-link'
                  %li= link_to t('books.categories.photo'),
                              books_path(category: 'photo'),
                              class: 'collapse-link'
                  %li= link_to t('books.categories.web_design'),
                              books_path(category: 'web_design'),
                              class: 'collapse-link'
                  %li= link_to t('books.categories.web_development'),
                              books_path(category: 'mobile_development'),
                              class: 'collapse-link'
              %li= link_to t('.my_account'), '#'
          .hidden-xs
            %ul.nav.navbar-nav
              %li= link_to t('.home'), root_path
              %li.dropdown
                %a.dropdown-toggle{href: "#", 'data-toggle': "dropdown",
                                    role: "button", 'aria-haspopup': "true",
                                    'aria-expanded': "false"}= t '.shop'
                %ul.dropdown-menu
                  %li= link_to t('books.categories.mobile_development'),
                                books_path(category: 'mobile_development')
                  %li= link_to t('books.categories.photo'),
                                books_path(category: 'photo')
                  %li= link_to t('books.categories.web_design'),
                                books_path(category: 'web_design')
                  %li= link_to t('books.categories.web_development'),
                                books_path(category: 'web_development')
              - if user_signed_in?
                %li.dropdown
                  %a.dropdown-toggle{href: "#", 'data-toggle': "dropdown",
                                      role: "button", 'aria-haspopup': "true",
                                       'aria-expanded': "false"}= t '.my_account'
                  %ul.dropdown-menu
                    %li= link_to t('.orders'), orders_path
                    %li= link_to t('.settings'), settings_edit_path
                    %li.divider{role: "separator"}
                    %li= link_to t('.logout'), destroy_user_session_path, method: :delete
              - else
                %li= link_to t('devise.sessions.new.sign_in'), new_user_session_path
                %li= link_to t('devise.shared.links.sign_up'), new_user_registration_path

    %main.container.general-main-wrap

      - if flash.any?
        %p#notice= notice
        %p#alert= alert

      = yield

    %footer.navbar-inverse
      .container
        .row
          .col-sm-9
            %ul.list-inline.general-align.mb-25
              %li= link_to t('.home'), root_path, class: 'nav-link'
              %li= link_to t('.shop'), books_path, class: 'nav-link'
              - if user_signed_in?
                %li= link_to t('.orders'), orders_path, class: 'nav-link'
                %li= link_to t('.settings'), settings_edit_path, class: 'nav-link'
          .col-sm-3
            %p.general-nav-mail= t '.support'
            %p.general-nav-number= t '.phone_number'
            %ul.list-inline.general-align
              %li
                %a.nav-link{href: "#"}
                  %i.fa.fa-facebook{'aria-hidden': "true"}
              %li
                %a.nav-link{href: "#"}
                  %i.fa.fa-twitter{'aria-hidden': "true"}
              %li
                %a.nav-link{href: "#"}
                  %i.fa.fa-google-plus{'aria-hidden': "true"}
              %li
                %a.nav-link{href: "#"}
                  %i.fa.fa-instagram{'aria-hidden': "true"}
